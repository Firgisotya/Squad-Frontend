<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-pulse"
>
  <!-- <p style="font-size: 20px; color: white">Loading...</p> -->
</ngx-spinner>

<div class="w-full px-6 py-6 mx-auto">
  <div
    class="w-full overflow-x-auto mb-4 p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"
  >
    <form [formGroup]="filterDate" (ngSubmit)="filterRangeDate()" class="">
      <div class="flex space-x-2">
        <div class="p-2">
          <label
            for="reason"
            class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >Reason</label
          >
          <select
            id="reason"
            class="rounded-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-40 text-sm border-gray-300 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            formControlName="reason"
          >
          <option value="">Choose an Reason</option>
          <option
          *ngFor="let item of dt_reason; index as i"
          ngValue="{{ item.reason_desc}}">
            {{ item.reason_desc }}
          </option>
          </select>
        </div>
        <div class="p-2">
          <label
            for="varian"
            class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >Varian</label
          >
          <select
            id="varian"
            class="rounded-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-40 text-sm border-gray-300 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            formControlName="varian"
          >
          <option value="">Choose an Varian</option>
          <option
          *ngFor="let item of dt_product; index as i"
          ngValue="{{ item.keterangan}}">
            {{ item.keterangan }}
          </option>
          </select>
        </div>
        <div class="p-2">
          <label
            for="datepicker"
            class="text-sm font-semibold text-gray-700 dark:text-gray-200"
            >Start Date</label
          >
          <input
            type="date"
            class="rounded-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-40 text-sm border-gray-300 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            id="datepicker"
            formControlName="start"
          />
        </div>
        <div class="p-2">
          <label
            for="datepicker"
            class="text-sm font-semibold text-gray-700 dark:text-gray-200"
            >End Date</label
          >
          <input
            type="date"
            class="rounded-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-40 text-sm border-gray-300 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            id="datepicker"
            formControlName="end"
          />
        </div>
        <!-- button submit filter -->
        <div class="p-2 flex justify-end items-end">
          <button
            type="submit"
            class="h-fit items-center justify-center px-8 py-2.5 text-sm font-medium text-white bg-blue-500 border border-transparent rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
          >
            Filter
          </button>
        </div>

        <div class="p-2 flex justify-end items-end">
          <button
            type="submit"
            class="h-fit items-center justify-center px-8 py-2.5 text-sm font-medium text-white bg-blue-500 border border-transparent rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            (click)="resetFilter()"
          >
            Reset
          </button>
        </div>

      </div>
    </form>
    <!-- <canvas width="1200px" id="canvasRejection"></canvas> -->

    <apx-chart
    [series]="chartReject?.series"
    [chart]="chartReject?.chart"
    [yaxis]="chartReject?.yaxis"
    [xaxis]="chartReject?.xaxis"
    [labels]="chartReject?.labels"
    [stroke]="chartReject?.stroke"
    [title]="chartReject?.title"
    [dataLabels]="chartReject?.dataLabels"
    [fill]="chartReject?.fill"
    [tooltip]="chartReject?.tooltip"
    [plotOptions]="chartReject?.plotOptions"
  ></apx-chart>
  </div>

  <div
    class="w-full overflow-x-scroll mb-4 p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"
  >
    <table
      class="items-center w-full mb-0 align-top border-collapse dark:border-white/40 text-slate-500"
    >
      <thead class="align-bottom text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th
            class="px-6 py-3 font-bold text-left uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-xxs border-b-solid tracking-none whitespace-nowrap text-black opacity-70"
          >
            Lotno
          </th>
          <th
            class="px-6 py-3 font-bold text-left uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-xxs border-b-solid tracking-none whitespace-nowrap text-black opacity-70"
          >
            Nama Produk
          </th>
          <th
            class="px-6 py-3 font-bold text-center uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-xxs border-b-solid tracking-none whitespace-nowrap text-black opacity-70"
          >
            Tanggal
          </th>
          <th
            class="px-6 py-3 font-bold text-center uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-xxs border-b-solid tracking-none whitespace-nowrap text-black opacity-70"
          >
            Quantity Reject
          </th>
          <th
            class="px-6 py-3 font-semibold capitalize align-middle bg-transparent border-b border-collapse border-solid shadow-none dark:border-white/40 dark:text-white tracking-none whitespace-nowrap text-black opacity-70"
          >
            Quantity Finish Good
          </th>
          <th
            class="px-6 py-3 font-semibold capitalize align-middle bg-transparent border-b border-collapse border-solid shadow-none dark:border-white/40 dark:text-white tracking-none whitespace-nowrap text-black opacity-70"
          >
            Quantity Inspection
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of dt_rejection">
          <td
            class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.new_lotno }}
            </p>
          </td>
          <td
            class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.produk }}
            </p>
          </td>
          <td
            class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.tanggal }}
            </p>
          </td>
          <td
            class="p-2 text-center align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.total_reject }}
            </p>
          </td>
          <td
            class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.total_finishgood }}
            </p>
          </td>
          <td
            class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent"
          >
            <p
              class="mb-0 px-6 text-xs font-semibold leading-tight dark:text-white dark:opacity-80"
            >
              {{ item.qty_inspeksi }}
            </p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
